# 项目级分析实现计划

## 1. 文件过滤模块
### 1.1 实现文件匹配
- [ ] 支持 glob 模式匹配
- [ ] 支持文件类型过滤: .js, .ts, .mjs, .mts
- [ ] 支持忽略文件/目录: node_modules, .git
- [ ] 实现异步文件遍历

### 1.2 依赖库
- [ ] 安装 glob: `bun add glob @types/glob`
- [ ] 使用 path 模块处理路径
- [ ] 使用 fs/promises 进行异步文件操作

## 2. 依赖分析模块
### 2.1 ESM 格式支持
- [ ] 识别 import 语句
- [ ] 识别 export 语句
- [ ] 处理 ES 模块解析规则
- [ ] 支持相对路径和绝对路径

### 2.2 依赖库
- [ ] 安装 resolve: `bun add resolve @types/resolve`
- [ ] 使用 @babel/parser 解析 ESM 语法
- [ ] 使用 @babel/traverse 遍历 AST

## 3. 项目分析模块
### 3.1 批量分析
- [ ] 实现项目级分析接口
- [ ] 支持并发处理多个文件
- [ ] 处理文件依赖关系
- [ ] 汇总分析结果

### 3.2 依赖库
- [ ] 安装 p-limit: `bun add p-limit`
- [ ] 使用 Promise.all 并发处理
- [ ] 实现结果缓存机制

## 4. 结果报告模块
### 4.1 结果汇总
- [ ] 按文件分组显示问题
- [ ] 按规则类型统计问题
- [ ] 生成 HTML 报告
- [ ] 支持 SARIF 格式输出

### 4.2 依赖库
- [ ] 安装 sarif: `bun add sarif`
- [ ] 使用 chalk 美化控制台输出
- [ ] 使用 ejs 生成 HTML 报告

## 5. 性能优化
### 5.1 缓存机制
- [ ] 缓存已分析的文件
- [ ] 缓存 AST 解析结果
- [ ] 缓存依赖分析结果

### 5.2 并发控制
- [ ] 限制并发文件处理数量
- [ ] 使用 worker_threads 并行处理
- [ ] 实现进度条显示

## 6. 测试与验证
### 6.1 单元测试
- [ ] 测试文件过滤功能
- [ ] 测试依赖分析功能
- [ ] 测试项目分析功能

### 6.2 集成测试
- [ ] 测试真实项目分析
- [ ] 测试大型项目性能
- [ ] 测试循环依赖处理

## 7. 文档与示例
### 7.1 使用文档
- [ ] 编写项目分析使用指南
- [ ] 编写 API 文档
- [ ] 编写配置说明

### 7.2 示例项目
- [ ] 创建示例项目
- [ ] 编写分析示例
- [ ] 编写报告示例